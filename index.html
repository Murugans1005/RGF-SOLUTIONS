<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Master Pro - RGF Solutions</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background-color: #f0f2f5; margin: 0; padding: 10px; }
        .hidden { display: none !important; }
        .container { max-width: 1250px; margin: 0 auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .nav-tabs { display: flex; justify-content: center; gap: 8px; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; flex-wrap: wrap; }
        .nav-tabs button { padding: 10px 15px; cursor: pointer; border: none; border-radius: 8px; background: #95a5a6; color: white; font-weight: bold; }
        .nav-tabs button.active { background: #e67e22; }
        input, select { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ccc; border-radius: 8px; font-size: 14px; }
        .btn-main { width: 100%; padding: 15px; background: #2c3e50; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .pos-summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px; margin-bottom: 20px; }
        .pos-card { background: #e3f2fd; padding: 12px; border-radius: 10px; text-align: center; border-left: 5px solid #1565c0; box-shadow: 2px 2px 5px rgba(0,0,0,0.05); }
        .banner { color: white; padding: 12px; border-radius: 10px; text-align: center; font-size: 0.95rem; font-weight: bold; }
        .bg-green { background: #2ecc71; }
        .bg-orange { background: #f39c12; }
        .bg-blue { background: #3498db; }
        .bg-red { background: #e74c3c; }
        .bg-dark { background: #2c3e50; }
        .table-wrapper { overflow-x: auto; border: 1px solid #eee; border-radius: 8px; margin-top: 15px; }
        table { width: 100%; border-collapse: collapse; font-size: 11px; }
        th, td { border-bottom: 1px solid #eee; padding: 12px; text-align: left; }
        th { background: #f8f9fa; white-space: nowrap; color: #2c3e50; }
        .btn-del { background: #ff4757; color: white; border: none; padding: 5px 8px; border-radius: 4px; cursor: pointer; }
        .btn-edit { background: #f1c40f; color: black; border: none; padding: 5px 8px; border-radius: 4px; cursor: pointer; font-weight: bold; margin-right: 5px; }
        .btn-print-sm { background: #3498db; color: white; border: none; padding: 5px 8px; border-radius: 4px; cursor: pointer; margin-right: 5px; }
        .btn-print-full { background: #2c3e50; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; margin-bottom: 10px; }
        .card-suggest { background: #e8f4fd; border: 1px solid #3498db; padding: 10px; border-radius: 8px; margin-bottom: 10px; }
        .admin-only { display: none; }
    </style>
</head>
<body>

    <div id="loginPage" style="text-align:center; padding-top: 80px;">
        <div style="background:white; display:inline-block; padding:30px; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.1); width:320px;">
            <h2 style="color:#2c3e50;">BUSINESS LOGIN</h2>
            <input type="text" id="userId" placeholder="User ID">
            <input type="password" id="password" placeholder="Password">
            <button class="btn-main" onclick="checkLogin()">GO</button>
        </div>
    </div>

    <div id="mainApp" class="container hidden">
        <div class="nav-tabs">
            <button id="btnEntry" class="active" onclick="showSection('entry')">Entry Form</button>
            <button id="btnDaily" onclick="showSection('daily')">Daily View</button>
            <button id="btnCust" onclick="showSection('cust')">Customer Master</button>
            <button id="btnAdmin" class="admin-only" onclick="showSection('admin')">Admin Accounting</button>
            <button style="background:#e74c3c; color:white;" onclick="location.reload()">Logout</button>
        </div>

        <div id="entrySection">
            <h3 id="formTitle">New Transaction</h3>
            <form id="billingForm">
                <input type="hidden" id="editId" value="">
                <input type="text" id="dateTime" style="text-align:center; border:none; font-weight:bold; color:#7f8c8d; background:transparent; width:100%;" readonly>
                
                <div style="display:grid; grid-template-columns: 1fr; gap:10px;">
                    <input type="tel" id="cMobile" placeholder="Enter Mobile Number" oninput="recallCustomer()" required>
                </div>

                <div id="cardRecallArea" class="hidden card-suggest">
                    <label style="font-size:12px; font-weight:bold; color:#2980b9;">MATCHING CARDS FOUND:</label>
                    <select id="cardRecallSelect" onchange="applySelectedCard()">
                        <option value="">-- Choose Card --</option>
                    </select>
                </div>

                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <input type="text" id="cName" placeholder="Customer Name" required>
                    <input type="text" id="cBankName" placeholder="Card Bank Name" required>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <input type="text" id="cCardLast4" placeholder="Card Last 4 Digits" maxlength="4" required>
                    <select id="posSelect" onchange="autoLoadMDR()" required></select>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <input type="text" id="sBank" placeholder="Settlement Bank" readonly>
                    <select id="cardType" onchange="autoLoadMDR()">
                        <option value="NORMAL">Normal Card</option>
                        <option value="CORPORATE">Corporate Card</option>
                    </select>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <input type="number" id="scPer" placeholder="SC %" value="2.0" step="0.1">
                    <div id="mdrShow" style="padding:12px; background:#fff9db; font-weight:bold; border-radius:8px; text-align:center; border: 1px solid #ffe066;">MDR: 0.00%</div>
                </div>
                
                <div style="padding:10px; background:#f0f2f5; border-radius:8px; margin-bottom:10px;">
                    <label style="font-size:12px; font-weight:bold;">TRANSACTION TYPE:</label>
                    <select id="extraAction">
                        <option value="NONE">NORMAL SWIPE</option>
                        <option value="LOAN">LOAN (‡Æï‡Øä‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ§‡ØÅ)</option>
                        <option value="WITHDRAW">WITHDRAW (‡Æé‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ§‡ØÅ)</option>
                    </select>
                </div>
                <input type="number" id="swipeAmt" placeholder="Total Amount (‚Çπ)" step="0.01" required>
                <button type="submit" id="saveBtn" class="btn-main" style="background:#27ae60; margin-top:10px;">SAVE DATA</button>
                <button type="button" id="cancelEdit" class="hidden" onclick="resetForm()" style="width:100%; padding:10px; margin-top:5px; background:#95a5a6; color:white; border:none; border-radius:8px; cursor:pointer;">CANCEL EDIT</button>
            </form>
        </div>

        <div id="custSection" class="hidden">
            <h3 style="color:#2c3e50; border-left:5px solid #3498db; padding-left:10px;">Customer Master Registration</h3>
            <form id="custRegForm" style="background:#f8f9fa; padding:15px; border-radius:10px;">
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <input type="tel" id="regMobile" placeholder="Mobile Number" required>
                    <input type="text" id="regName" placeholder="Customer Name" required>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <input type="text" id="regBank" placeholder="Card Bank Name" required>
                    <input type="text" id="regLast4" placeholder="Card Last 4 Digits" maxlength="4" required>
                </div>
                <button type="button" onclick="saveCustomerOnly()" class="btn-main" style="background:#3498db;">SAVE CUSTOMER DETAILS</button>
            </form>
            <div id="regSuccess" class="hidden" style="margin-top:10px; padding:10px; background:#d4edda; color:#155724; border-radius:5px; text-align:center;">Saved Successfully!</div>
        </div>

        <div id="dailySection" class="hidden">
            <div class="pos-summary-grid">
                <div id="dSale" class="banner bg-green">Today Swipe: ‚Çπ0</div>
                <div id="dSC" class="banner bg-orange">Today SC: ‚Çπ0</div>
                <div id="dLoan" class="banner bg-blue">Today Loan: ‚Çπ0</div>
                <div id="dWith" class="banner bg-red">Today With: ‚Çπ0</div>
            </div>
            <button class="btn-print-full" onclick="printFullReport()">üñ®Ô∏è Print Full Report</button>
            <div class="table-wrapper">
                <table>
                    <thead><tr><th>Time</th><th>Customer</th><th>Bank</th><th>POS</th><th>Type</th><th>Amount</th><th>SC (‚Çπ)</th><th>Net Pay</th><th>Action</th></tr></thead>
                    <tbody id="dailyTbody"></tbody>
                </table>
            </div>
        </div>

        <div id="adminSection" class="hidden">
            <div style="background:#f9f9f9; padding:20px; border-radius:10px; margin-bottom:20px; border:1px solid #ddd;">
                <h4 style="margin:0 0 10px 0;">Date Range Search</h4>
                <div style="display:flex; flex-wrap:wrap; gap:10px;">
                    <input type="date" id="fromDate"> 
                    <input type="date" id="toDate">
                    <button class="btn-main" style="width:auto; padding:0 30px; background:#3498db;" onclick="renderAdmin()">CHECK</button>
                </div>
            </div>
            <div id="adminAnalytics" class="pos-summary-grid"></div>
            <div id="posBreakdown" class="pos-summary-grid"></div>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr><th>Date</th><th>Staff</th><th>Type</th><th>POS ID</th><th>Amount</th><th>SC</th><th>Profit</th><th>Net Pay</th><th>Action</th></tr>
                    </thead>
                    <tbody id="adminTbody"></tbody>
                </table>
            </div>
        </div>
    </div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyCTfzmnIMbryZuGCm4iq_3C1vrjQk4BWF4",
        authDomain: "rgf-solutions.firebaseapp.com",
        databaseURL: "https://rgf-solutions-default-rtdb.firebaseio.com",
        projectId: "rgf-solutions",
        storageBucket: "rgf-solutions.firebasestorage.app",
        messagingSenderId: "324475817892",
        appId: "1:324475817892:web:103ecc2311e6b459f4fb31"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const usersDB = { "sabariraj admin": "Guru", "manager": "Murugan", "valli": "valli123", "sudha": "sudha123" };

    // UPDATED AS PER YOUR LATEST IMAGE image_7612a9.png
    const defaultInitialPos = [
        {id: "IOB-3897", bank: "RGT MAHA 7997", normal: 1.357, corp: 3.528},
        {id: "CUB-9204", bank: "RGT MAHA 7997", normal: 1.298, corp: 3.528},
        {id: "CUB-4705", bank: "RGT MAHA 7997", normal: 1.210, corp: 3.528},
        {id: "UNION-5175", bank: "RGT MAHA 7997", normal: 1.357, corp: 3.528},
        {id: "UNION-8423", bank: "RGT MAHA 7997", normal: 1.357, corp: 3.528},
        {id: "AXIS-0028", bank: "AXIS-1345", normal: 1.735, corp: 2.655},
        {id: "HDFC-7860", bank: "HDFC-6015", normal: 1.652, corp: 3.528},
        {id: "HDFC-6508", bank: "HDFC-4572", normal: 1.829, corp: 3.528},
        {id: "FINKEDA", bank: "RGT MAHA 7997", normal: 1.350, corp: 3.528},
        {id: "MOS", bank: "EQUITAS 1", normal: 1.700, corp: 3.528}
    ];

    let posMaster = defaultInitialPos;
    let transactions = [];
    let currentUser = "";

    db.ref('transactions').on('value', (snapshot) => {
        const data = snapshot.val();
        transactions = data ? Object.values(data) : [];
        if(!document.getElementById('dailySection').classList.contains('hidden')) renderDaily();
        if(!document.getElementById('adminSection').classList.contains('hidden')) renderAdmin();
    });

    function saveCustomerOnly() {
        const name = document.getElementById('regName').value;
        const mobile = document.getElementById('regMobile').value;
        const bank = document.getElementById('regBank').value;
        const last4 = document.getElementById('regLast4').value;
        if(!name || mobile.length < 10 || !bank || !last4) { alert("Check details!"); return; }
        const entryId = "REG_" + Date.now();
        const entry = { id: entryId, user: currentUser, category: "REGISTRATION", date: new Date().toLocaleDateString('en-CA'), time: new Date().toLocaleTimeString(), name: name, mobile: mobile, cardBank: bank, cardLast4: last4, pos: "N/A", amt: "0.00", scVal: "0.00", mdrVal: "0.00", netProfit: "0.00", netPay: "0.00" };
        db.ref('transactions/' + entryId).set(entry).then(() => { document.getElementById('custRegForm').reset(); const msg = document.getElementById('regSuccess'); msg.classList.remove('hidden'); setTimeout(() => msg.classList.add('hidden'), 3000); });
    }

    function recallCustomer() {
        const mob = document.getElementById('cMobile').value.trim();
        const area = document.getElementById('cardRecallArea');
        const sel = document.getElementById('cardRecallSelect');
        if(mob.length < 10) { area.classList.add('hidden'); return; }
        const matches = transactions.filter(t => t.mobile === mob);
        if(matches.length > 0) {
            document.getElementById('cName').value = matches[0].name;
            area.classList.remove('hidden');
            let cards = []; let seen = new Set();
            matches.forEach(m => { if(m.cardBank !== "N/A"){ let key = m.cardBank + "|" + m.cardLast4; if(!seen.has(key)) { cards.push({bank: m.cardBank, last4: m.cardLast4}); seen.add(key); } } });
            sel.innerHTML = `<option value="">-- Select Card (${cards.length}) --</option>` + cards.map(c => `<option value="${c.bank}|${c.last4}">${c.bank} - ${c.last4}</option>`).join('');
        } else { area.classList.add('hidden'); }
    }

    function applySelectedCard() { const val = document.getElementById('cardRecallSelect').value; if(!val) return; const [bank, last4] = val.split('|'); document.getElementById('cBankName').value = bank; document.getElementById('cCardLast4').value = last4; }

    function checkLogin() { const id = document.getElementById('userId').value.trim(); const pass = document.getElementById('password').value.trim(); if (usersDB[id] && usersDB[id] === pass) { currentUser = id; document.getElementById('loginPage').classList.add('hidden'); document.getElementById('mainApp').classList.remove('hidden'); if(id === 'sabariraj admin' || id === 'manager') { document.querySelectorAll('.admin-only').forEach(e => e.style.display = 'block'); } updatePosDropdown(); showSection('entry'); } else { alert("Login Failed!"); } }

    function showSection(s) { ['entry', 'daily', 'cust', 'admin'].forEach(id => { const el = document.getElementById(id+'Section'); if(el) el.classList.add('hidden'); const btn = document.getElementById('btn'+id.charAt(0).toUpperCase()+id.slice(1)); if(btn) btn.classList.remove('active'); }); document.getElementById(s+'Section').classList.remove('hidden'); const activeBtn = document.getElementById('btn'+s.charAt(0).toUpperCase()+s.slice(1)); if(activeBtn) activeBtn.classList.add('active'); if(s === 'daily') renderDaily(); if(s === 'admin') renderAdmin(); }

    function updatePosDropdown() { document.getElementById('posSelect').innerHTML = `<option value="">Select POS</option>` + posMaster.map(p => `<option value="${p.id}">${p.id}</option>`).join(''); }

    function autoLoadMDR() { const sel = document.getElementById('posSelect').value; const type = document.getElementById('cardType').value; const data = posMaster.find(p => p.id === sel); if(data) { const rate = (type === 'CORPORATE') ? data.corp : data.normal; document.getElementById('sBank').value = data.bank; document.getElementById('mdrShow').innerText = `MDR: ${rate}%`; return rate; } return 0; }

    setInterval(() => { document.getElementById('dateTime').value = new Date().toLocaleString(); }, 1000);

    function resetForm() { document.getElementById('billingForm').reset(); document.getElementById('editId').value = ""; document.getElementById('formTitle').innerText = "New Transaction"; document.getElementById('saveBtn').innerText = "SAVE DATA"; document.getElementById('saveBtn').style.background = "#27ae60"; document.getElementById('cancelEdit').classList.add('hidden'); document.getElementById('cardRecallArea').classList.add('hidden'); autoLoadMDR(); }

    document.getElementById('billingForm').onsubmit = function(e) {
        e.preventDefault(); const editId = document.getElementById('editId').value; const btn = document.getElementById('saveBtn'); btn.disabled = true; const amt = parseFloat(document.getElementById('swipeAmt').value); const mdrP = autoLoadMDR(); const scP = parseFloat(document.getElementById('scPer').value); const scVal = (amt * scP) / 100; const mdrVal = (amt * mdrP) / 100; const entryId = editId ? editId : Date.now();
        const entry = { id: entryId, user: currentUser, category: document.getElementById('extraAction').value, date: editId ? transactions.find(t=>t.id==editId).date : new Date().toLocaleDateString('en-CA'), time: editId ? transactions.find(t=>t.id==editId).time : new Date().toLocaleTimeString(), name: document.getElementById('cName').value, mobile: document.getElementById('cMobile').value, cardBank: document.getElementById('cBankName').value, cardLast4: document.getElementById('cCardLast4').value, pos: document.getElementById('posSelect').value, amt: amt.toFixed(2), scVal: scVal.toFixed(2), mdrVal: mdrVal.toFixed(2), netProfit: (scVal - mdrVal).toFixed(2), netPay: (amt - scVal).toFixed(2) };
        db.ref('transactions/' + entryId).set(entry).then(() => { alert(editId ? "Updated!" : "Saved!"); resetForm(); btn.disabled = false; showSection('daily'); });
    };

    function editEntry(id) { const item = transactions.find(t => t.id == id); if(!item) return; document.getElementById('editId').value = item.id; document.getElementById('cMobile').value = item.mobile; document.getElementById('cName').value = item.name; document.getElementById('cBankName').value = item.cardBank; document.getElementById('cCardLast4').value = item.cardLast4; document.getElementById('posSelect').value = item.pos; document.getElementById('extraAction').value = item.category; document.getElementById('swipeAmt').value = item.amt; document.getElementById('formTitle').innerText = "Edit Mode"; document.getElementById('saveBtn').innerText = "UPDATE"; document.getElementById('saveBtn').style.background = "#e67e22"; document.getElementById('cancelEdit').classList.remove('hidden'); showSection('entry'); autoLoadMDR(); }

    function deleteEntry(id) { if(confirm("Confirm Delete?")) db.ref('transactions/' + id).remove(); }

    function renderDaily() {
        const today = new Date().toLocaleDateString('en-CA'); const data = transactions.filter(d => d.date === today && d.category !== "REGISTRATION"); let sT = 0, scT = 0, lT = 0, wT = 0, h = "";
        data.slice().reverse().forEach(d => { sT += Number(d.amt); scT += Number(d.scVal); if(d.category === 'LOAN') lT += Number(d.amt); if(d.category === 'WITHDRAW') wT += Number(d.amt); h += `<tr><td>${d.time}</td><td>${d.name}</td><td>${d.cardBank}</td><td>${d.pos}</td><td>${d.category}</td><td>‚Çπ${d.amt}</td><td>‚Çπ${d.scVal}</td><td>‚Çπ${d.netPay}</td><td><button class="btn-print-sm" onclick="printSingleReceipt(${d.id})">üñ®Ô∏è</button><button class="btn-edit" onclick="editEntry(${d.id})">‚úèÔ∏è</button><button class="btn-del" onclick="deleteEntry(${d.id})">X</button></td></tr>`; });
        document.getElementById('dSale').innerText = `Today Swipe: ‚Çπ${sT.toLocaleString()}`; document.getElementById('dSC').innerText = `Today SC: ‚Çπ${scT.toLocaleString()}`; document.getElementById('dLoan').innerText = `Today Loan: ‚Çπ${lT.toLocaleString()}`; document.getElementById('dWith').innerText = `Today With: ‚Çπ${wT.toLocaleString()}`; document.getElementById('dailyTbody').innerHTML = h;
    }

    function printSingleReceipt(id) { const d = transactions.find(t => t.id == id); if(!d) return; const pw = window.open('', '', 'height=600,width=400'); pw.document.write(`<html><head><style>body{font-family:monospace;padding:20px;text-align:center;}.receipt{border:1px dashed #000;padding:10px;}.line{display:flex;justify-content:space-between;margin:5px 0;}</style></head><body><div class="receipt"><h3>RGF SOLUTIONS</h3><hr><div class="line"><span>Date:</span><span>${d.date}</span></div><div class="line"><span>Time:</span><span>${d.time}</span></div><hr><div class="line"><span>Customer:</span><span>${d.name}</span></div><div class="line"><span>Mobile:</span><span>${d.mobile}</span></div><div class="line"><span>Bank:</span><span>${d.cardBank}</span></div><div class="line"><span>POS:</span><span>${d.pos}</span></div><div class="line"><span>Type:</span><span>${d.category}</span></div><hr><div class="line"><b>Total:</b><b>‚Çπ${d.amt}</b></div><div class="line"><span>SC Paid:</span><span>‚Çπ${d.scVal}</span></div><div class="line"><b>Net Pay:</b><b>‚Çπ${d.netPay}</b></div><hr><p>Thank You!</p></div></body></html>`); pw.document.close(); pw.print(); }

    function printFullReport() { const today = new Date().toLocaleDateString('en-CA'); const data = transactions.filter(d => d.date === today && d.category !== "REGISTRATION"); const pw = window.open('', '', 'height=600,width=800'); let rows = data.map(d => `<tr><td>${d.time}</td><td>${d.name}</td><td>${d.pos}</td><td>‚Çπ${d.amt}</td><td>‚Çπ${d.scVal}</td><td>‚Çπ${d.netPay}</td></tr>`).join(''); pw.document.write(`<html><head><style>table{width:100%;border-collapse:collapse;}th,td{border:1px solid #ccc;padding:8px;font-size:12px;}</style></head><body><h2>Report - ${today}</h2><table><thead><tr><th>Time</th><th>Name</th><th>POS</th><th>Amt</th><th>SC</th><th>Net</th></tr></thead><tbody>${rows}</tbody></table></body></html>`); pw.document.close(); pw.print(); }

    function renderAdmin() {
        const from = document.getElementById('fromDate').value; const to = document.getElementById('toDate').value; let data = (from && to) ? transactions.filter(d => d.date >= from && d.date <= to && d.category !== "REGISTRATION") : transactions.filter(t => t.category !== "REGISTRATION"); let ts=0, tsc=0, tp=0, tl=0, tw=0; let posSummary = {}; posMaster.forEach(p => posSummary[p.id] = 0); let h = "";
        data.slice().reverse().forEach(d => { ts += Number(d.amt); tsc += Number(d.scVal); tp += Number(d.netProfit); if(d.category === 'LOAN') tl += Number(d.amt); if(d.category === 'WITHDRAW') tw += Number(d.amt); if(posSummary[d.pos] !== undefined) posSummary[d.pos] += Number(d.amt); h += `<tr><td>${d.date}</td><td>${d.user}</td><td><b>${d.category}</b></td><td>${d.pos}</td><td>‚Çπ${d.amt}</td><td>‚Çπ${d.scVal}</td><td>‚Çπ${d.netProfit}</td><td>‚Çπ${d.netPay}</td><td><button class="btn-print-sm" onclick="printSingleReceipt(${d.id})">üñ®Ô∏è</button><button class="btn-edit" onclick="editEntry(${d.id})">‚úèÔ∏è</button><button class="btn-del" onclick="deleteEntry(${d.id})">X</button></td></tr>`; });
        document.getElementById('adminAnalytics').innerHTML = `<div class="pos-card bg-dark" style="color:white;">Overall Swipe<b>‚Çπ${ts.toLocaleString()}</b></div><div class="pos-card bg-orange" style="color:white;">Overall SC<b>‚Çπ${tsc.toLocaleString()}</b></div><div class="pos-card bg-green" style="color:white;">Overall Profit<b>‚Çπ${tp.toFixed(2)}</b></div><div class="pos-card bg-blue" style="color:white;">Total Loan<b>‚Çπ${tl.toLocaleString()}</b></div><div class="pos-card bg-red" style="color:white;">Total Withdraw<b>‚Çπ${tw.toLocaleString()}</b></div>`; let phtml = ""; for(let id in posSummary) { if(posSummary[id] > 0) phtml += `<div class="pos-card"><span>${id}</span><br><b>‚Çπ${posSummary[id].toLocaleString()}</b></div>`; } document.getElementById('posBreakdown').innerHTML = phtml || "No Business Found"; document.getElementById('adminTbody').innerHTML = h;
    }
</script>
</body>
</html>
